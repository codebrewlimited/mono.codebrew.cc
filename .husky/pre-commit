#!/usr/bin/env sh
# . "$(dirname -- "$0")/_/husky.sh"

echo "ğŸ” Checking for changes in workspaces..."

# Get list of changed files staged for commit
CHANGED=$(git diff --cached --name-only)

# If v1 has changes, bump version
if echo "$CHANGED" | grep -E "^v1/src/|^v1/package.json"; then
  echo "ğŸ“¦ Bumping version for v1..."
  npm version patch --workspace=v1 --no-git-tag-version
fi

# If v2 has changes, bump version
if echo "$CHANGED" | grep -E "^v2/src/|^v2/package.json"; then
  echo "ğŸ“¦ Bumping version for v2..."
  npm version patch --workspace=v2 --no-git-tag-version
fi
